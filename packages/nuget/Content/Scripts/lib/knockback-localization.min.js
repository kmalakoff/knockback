/*
  knockback.js 0.16.2
  (c) 2011, 2012 Kevin Malakoff.
  Knockback.js is freely distributable under the MIT license.
  See the following for full license details:
    https://github.com/kmalakoff/knockback/blob/master/LICENSE
  Dependencies: Knockout.js, Backbone.js, and Underscore.js.
*/(function(){return function(e){return typeof define=="function"&&define.amd?define("knockback",["underscore","backbone","knockout"],e):e.call(this)}(function(){var e,t,n,r;return t=!window.kb&&typeof require!="undefined"?require("knockback"):window.kb,r=t._,e=t.Backbone,n=t.ko,t.locale_manager=void 0,t.LocalizedObservable=function(){function i(e,i,s){var o,u=this;return this.value=e,this.vm=s,i||(i={}),this.vm||(this.vm={}),this.read||throwMissing(this,"read"),t.locale_manager||throwMissing(this,"kb.locale_manager"),this.__kb||(this.__kb={}),this.__kb._onLocaleChange=r.bind(this._onLocaleChange,this),this.__kb._onChange=i.onChange,this.value&&(e=n.utils.unwrapObservable(this.value)),this.vo=n.observable(e?this.read(e,null):null),o=t.utils.wrappedObservable(this,n.dependentObservable({read:function(){return u.value&&n.utils.unwrapObservable(u.value),u.vo(),u.read(n.utils.unwrapObservable(u.value))},write:function(e){u.write||throwUnexpected(u,"writing to read-only"),u.write(e,n.utils.unwrapObservable(u.value)),u.vo(e);if(u.__kb._onChange)return u.__kb._onChange(e)},owner:this.vm})),o.destroy=r.bind(this.destroy,this),o.observedValue=r.bind(this.observedValue,this),o.resetToCurrent=r.bind(this.resetToCurrent,this),t.locale_manager.bind("change",this.__kb._onLocaleChange),i.hasOwnProperty("default")&&(o=t.DefaultObservable&&n.defaultObservable(o,i["default"])),o}return i.extend=e.Model.extend,i.prototype.destroy=function(){return t.locale_manager.unbind("change",this.__kb._onLocaleChange),this.vm=null,t.utils.wrappedDestroy(this)},i.prototype.resetToCurrent=function(){var e,r;r=t.utils.wrappedObservable(this),e=this.value?this.read(n.utils.unwrapObservable(this.value)):null;if(r()===e)return;return r(e)},i.prototype.observedValue=function(e){return arguments.length===0?this.value:(this.value=e,this._onLocaleChange(),this)},i.prototype._onLocaleChange=function(){var e;e=this.read(n.utils.unwrapObservable(this.value)),this.vo(e);if(this.__kb._onChange)return this.__kb._onChange(e)},i}(),t.localizedObservable=function(e,n,r){return new t.LocalizedObservable(e,n,r)},t})}).call(this);