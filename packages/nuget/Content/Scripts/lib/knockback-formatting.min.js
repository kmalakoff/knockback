/*
  knockback.js 0.16.5
  (c) 2011, 2012 Kevin Malakoff.
  Knockback.js is freely distributable under the MIT license.
  See the following for full license details:
    https://github.com/kmalakoff/knockback/blob/master/LICENSE
  Dependencies: Knockout.js, Backbone.js, and Underscore.js.
*/(function(){return function(e){return typeof define=="function"&&define.amd?define("knockback",["underscore","backbone","knockout"],e):e.call(this)}(function(){var e,t,n,r,i;return n=!window.kb&&typeof require!="undefined"?require("knockback"):window.kb,i=n._,e=n.Backbone,r=n.ko,t=Array.prototype.slice,n.toFormattedString=function(e){var n,i,s,o,u,a;u=e.slice(),i=t.call(arguments,1);for(s in i){n=i[s],a=r.utils.unwrapObservable(n),a||(a=""),o=e.indexOf("{"+s+"}");while(o>=0)u=u.replace("{"+s+"}",a),o=e.indexOf("{"+s+"}",o+1)}return u},n.parseFormattedString=function(e,t){var n,r,s,o,u,a,f,l,c,h,p,d,v;h=t.slice(),s=0,a=0,l={};while(h.search("\\{"+s+"\\}")>=0){f=t.indexOf("{"+s+"}");while(f>=0)h=h.replace("{"+s+"}","(.*)"),l[f]=s,a++,f=t.indexOf("{"+s+"}",f+1);s++}n=s,c=new RegExp(h),u=c.exec(e),u&&u.shift();if(!u||u.length!==a){p=[];while(n-->0)p.push("");return p}v=i.sortBy(i.keys(l),function(e,t){return parseInt(e,10)}),r={};for(o in v){f=v[o],s=l[f];if(r.hasOwnProperty(s))continue;r[s]=o}d=[],s=0;while(s<n)d.push(u[r[s]]),s++;return d},n.FormattedObservable=function(){function e(e,s){var o,u;return i.isArray(s)?(e=e,u=s):u=t.call(arguments,1),o=n.utils.wrappedObservable(this,r.dependentObservable({read:function(){var t,i,o;s=[r.utils.unwrapObservable(e)];for(i=0,o=u.length;i<o;i++)t=u[i],s.push(r.utils.unwrapObservable(t));return n.toFormattedString.apply(null,s)},write:function(t){var i,s,o;s=n.parseFormattedString(t,r.utils.unwrapObservable(e)),o=Math.min(u.length,s.length),i=0;while(i<o)u[i](s[i]),i++;return this}})),o}return e.prototype.destroy=function(){return n.utils.wrappedDestroy(this)},e}(),n.formattedObservable=function(e,r){return new n.FormattedObservable(e,t.call(arguments,1))},n})}).call(this);